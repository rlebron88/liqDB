{% extends "app/base_site.html" %}

{% block title %} {{pagetitle}} {% endblock title %}
{% block stylesheets %}
  {{ block.super }}
<link href="/static/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
  <link href="/static/vendors/pnotify/dist/pnotify.css" rel="stylesheet">
  <link href="/static/vendors/pnotify/dist/pnotify.buttons.css" rel="stylesheet">
  <link href="/static/vendors/pnotify/dist/pnotify.nonblock.css" rel="stylesheet">
{% endblock stylesheets %}

{% block content %}
  <div class="right_col" role="main">
    <div class="">
      <div class="page-title">
        <div class="title_left">
          <!--"Version1:<span style="font-size:10px;"> (10.3.4)</span>  vs Version2: <span style="font-size:10px;">(10.3.4)</span>-->
          <h3>{{pagetitle}} <span style="font-size:10px;">[{{SRP_field|safe}}] [{{PRJ_field|safe}}] {{article_field|safe}} </span> </h3>
        </div>


        </div>
      </div>

      <div class="clearfix"></div>

      <div class="">
        <div class="col-md-12 col-sm-12 col-xs-12">
          <div class="x_panel">
            <div class="x_title">
              <h2> {{title}} </h2>

              <div class="clearfix"></div>
            </div>
            <div class="x_content">


              <div class="" role="tabpanel" data-example-id="togglable-tabs">
                <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                  <li role="presentation" class="active"><a href="#tab_metadata" id="overview-tab" role="tab" data-toggle="tab" aria-expanded="true">Overview</a>
                  </li>
                  <li role="presentation" class=""><a href="#tab_profile" role="tab" id="profiles" data-toggle="tab" aria-expanded="false">miRNA Profiles</a>
                  </li>
                  <li role="presentation" class=""><a href="#tab_downloads" role="tab" id="profile-tab2" data-toggle="tab" aria-expanded="false">Profile</a>
                  </li>
                </ul>
                <div id="myTabContent" class="tab-content">
                  <div role="tabpanel" class="tab-pane fade active in" id="tab_metadata" aria-labelledby="overview-tab">
                    <p>{{Abstract|safe}}</p>
                    <div class="x_content">
              <p class="text-muted font-13 m-b-30">
                <!--DataTables has most features enabled by default, so all you need to do to use it with your own tables is to call the construction function: <code>$().DataTable();</code>-->
              </p>
              <h2> Samples metadata</h2>
                    <br>
              <!--<table id="datatable-checkbox" class="table table-striped table-bordered bulk_action">-->
              <table id="example" class="table table-striped table-bordered bulk_action"></table>
                <div class="accordion" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel">
                  <a class="panel-heading" role="tab" id="headingOne" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                    <h4 class="panel-title">List of SRA Experiments</h4>
                  </a>
                  <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                    <div class="panel-body">
                        <pre style="white-space: pre-line">
                              {{SRX_list}}
                        </pre>
                    </div>
                  </div>
                </div>
              </div>
                    </div>
                  </div>
                  <div role="tabpanel" class="tab-pane fade" id="tab_profile" aria-labelledby="profiles">
                    <p></p>
                    <table id="profile" class="table table-striped table-bordered bulk_action"></table>
                  </div>
                  <div role="tabpanel" class="tab-pane fade" id="tab_downloads" aria-labelledby="profile-tab">
                    <p></p>
                    <button class="btn"><i class="fa fa-download"></i> Download some stuff</button>
                    <button class="btn"><i class="fa fa-download"></i> <a href="http://bioinfo5.ugr.es/srnatoolbox/media/4LOC73A18CPD9KF/output_directory/mature_sense_minExpr5_RCadj.mat" download></a></button>
                    <a href="http://bioinfo5.ugr.es/srnatoolbox/media/4LOC73A18CPD9KF/output_directory/mature_sense_minExpr5_RCadj.mat" download> <i
                                class="fa fa-download fa-fw"></i>Matrix File</a>
                    <a href="http://bioinfo5.ugr.es/srnatoolbox/media/4LOC73A18CPD9KF/output_directory/mature_sense_minExpr5_RCadj.mat"><button>Download!</button></a>
                    <div class="panel-body">
                Input File: <a href="http://bioinfo5.ugr.es/srnatoolbox/media//UBNMV10I6X5S169/IK_exosomes.fastq.gz" download> <i class="fa fa-download fa-fw"></i> IK_exo.fastq.gz</a>
            </div>
                    <!--<a href="http://bioinfo5.ugr.es/srnatoolbox/media/4LOC73A18CPD9KF/output_directory/mature_sense_minExpr5_RCadj.mat" download> <i-->
                                <!--class="fa fa-download fa-fw"></i>Matrix File</a>-->
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>



      </div>

      <div class="clearfix"></div>

      <div class="">



      </div>


    </div>
    <div class="clearfix"></div>
  </div>
{% endblock content %}

{% block javascripts %}
  {{ block.super }}

<script src="/static/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
  <script src="/static/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
  <script src="/static/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
  <script src="/static/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
  <script src="/static/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
  <script src="/static/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
  <script src="/static/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
  <script src="/static/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>

<script>
//    alert("Hey");
//    var received_data = {{ data }};
    var received_data = {{ data|safe }};
//    alert(received_data);

$(document).ready(function() {
    $('#example').DataTable( {
//        'responsive': true,
        data: received_data,
        columns: [
            { title: "Experiment" },
            { title: "BioSample" },
            { title: "Organism" },
            { title: "Instrument" },
            { title: "Sex" },
            { title: "Fluid" },
            { title: "Library preparation protocol" },

            { title: "RNA Extraction protocol" },
            { title: "Healthy" },
            { title: "Cancer" },
            { title: "Exosome isolation treatment" },
            { title: "Sample info" }


        ]
    } );
} );

</script>

<script>
//    alert("Hey");
//    var received_data = {{ data }};
    var parsed_data = {{ exp_data|safe }};
    var exp_columns = {{exp_columns|safe}}
//    alert(exp_columns)
//    alert(received_data);

$(document).ready(function() {
    $('#profile').DataTable( {
//        'responsive': true,
        data: parsed_data,
        columns: exp_columns
    } );
} );

</script>

<script>

  // Javascript to enable link to tab
var url = document.location.toString();
if (url.match('#')) {
    $('.nav-tabs a[href="#' + url.split('#')[1] + '"]').tab('show');
}

// Change hash for page-reload
$('.nav-tabs a').on('shown.bs.tab', function (e) {
    window.location.hash = e.target.hash;
})


</script>

<!-- PNotify -->
  <!--<script src="/static/vendors/pnotify/dist/pnotify.js"></script>-->
  <!--<script src="/static/vendors/pnotify/dist/pnotify.buttons.js"></script>-->
  <!--<script src="/static/vendors/pnotify/dist/pnotify.nonblock.js"></script>-->
{% endblock javascripts %}
